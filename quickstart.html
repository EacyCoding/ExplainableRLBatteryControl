<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>QuickStart &mdash; CityLearn 2.1.2 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" type="text/css" />
      <link rel="stylesheet" href="_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" type="text/css" />
      <link rel="stylesheet" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" type="text/css" />
      <link rel="stylesheet" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" type="text/css" />
      <link rel="stylesheet" href="_static/nbsphinx-code-cells.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/clipboard.min.js"></script>
        <script src="_static/copybutton.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Overview" href="overview/index.html" />
    <link rel="prev" title="Installation" href="installation.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            CityLearn
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">QuickStart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#No-Control-(Baseline)">No Control (Baseline)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Centralized-RBC">Centralized RBC</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Decentralized-Independent-SAC">Decentralized-Independent SAC</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Decentralized-Cooperative-MARLISA">Decentralized-Cooperative MARLISA</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Stable-Baselines3-Reinforcement-Learning-Algorithms">Stable Baselines3 Reinforcement Learning Algorithms</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage/index.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/modules.html">citylearn</a></li>
<li class="toctree-l1"><a class="reference internal" href="citylearn_challenge/index.html">The CityLearn Challenge</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">References</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">CityLearn</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">QuickStart</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/intelligent-environments-lab/CityLearn/blob/master/docs/source/quickstart.nblink" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <p><img alt="Open In Colab" src="https://colab.research.google.com/assets/colab-badge.svg" /></p>
<section id="QuickStart">
<h1>QuickStart<a class="headerlink" href="#QuickStart" title="Permalink to this headline"></a></h1>
<p>Install the latest CityLearn version from PyPi with the :code:<code class="docutils literal notranslate"><span class="pre">pip</span></code> command:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>pip<span class="w"> </span>install<span class="w"> </span>CityLearn
</pre></div>
</div>
</div>
<section id="No-Control-(Baseline)">
<h2>No Control (Baseline)<a class="headerlink" href="#No-Control-(Baseline)" title="Permalink to this headline"></a></h2>
<p>Run the following to simulate an environment where the storage systems and heat pumps are not controlled (baseline). The storage actions prescribed will be 0.0 and the heat pump will have no action, i.e. <code class="docutils literal notranslate"><span class="pre">None</span></code>, causing it to deliver the ideal load in the building time series files:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">citylearn.agents.base</span> <span class="kn">import</span> <span class="n">BaselineAgent</span> <span class="k">as</span> <span class="n">Agent</span>
<span class="kn">from</span> <span class="nn">citylearn.citylearn</span> <span class="kn">import</span> <span class="n">CityLearnEnv</span>

<span class="n">dataset_name</span> <span class="o">=</span> <span class="s1">&#39;citylearn_challenge_2023_phase_2_local_evaluation&#39;</span>
<span class="n">env</span> <span class="o">=</span> <span class="n">CityLearnEnv</span><span class="p">(</span><span class="n">dataset_name</span><span class="p">,</span> <span class="n">central_agent</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">Agent</span><span class="p">(</span><span class="n">env</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">learn</span><span class="p">(</span><span class="n">episodes</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># print cost functions at the end of episode</span>
<span class="n">kpis</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">evaluate</span><span class="p">()</span>
<span class="n">kpis</span> <span class="o">=</span> <span class="n">kpis</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s1">&#39;cost_function&#39;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">&#39;value&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">kpis</span> <span class="o">=</span> <span class="n">kpis</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">how</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">kpis</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
/Users/kingsleyenweye/Desktop/INTELLIGENT_ENVIRONMENT_LAB/citylearn/CityLearn/env/lib/python3.7/site-packages/gym/spaces/box.py:128: UserWarning: <span class="ansi-yellow-fg">WARN: Box bound precision lowered by casting to float32</span>
  logger.warn(f&#34;Box bound precision lowered by casting to {self.dtype}&#34;)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>name</th>
      <th>Building_1</th>
      <th>Building_2</th>
      <th>Building_3</th>
      <th>District</th>
    </tr>
    <tr>
      <th>cost_function</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>annual_normalized_unserved_energy_total</th>
      <td>0.019</td>
      <td>0.018</td>
      <td>0.018</td>
      <td>0.018</td>
    </tr>
    <tr>
      <th>annual_peak_average</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.000</td>
    </tr>
    <tr>
      <th>carbon_emissions_total</th>
      <td>1.000</td>
      <td>1.000</td>
      <td>1.000</td>
      <td>1.000</td>
    </tr>
    <tr>
      <th>cost_total</th>
      <td>1.000</td>
      <td>1.000</td>
      <td>1.000</td>
      <td>1.000</td>
    </tr>
    <tr>
      <th>daily_one_minus_load_factor_average</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.000</td>
    </tr>
    <tr>
      <th>daily_peak_average</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.000</td>
    </tr>
    <tr>
      <th>discomfort_delta_average</th>
      <td>-1.544</td>
      <td>0.538</td>
      <td>-0.543</td>
      <td>-0.517</td>
    </tr>
    <tr>
      <th>discomfort_delta_maximum</th>
      <td>5.384</td>
      <td>5.847</td>
      <td>3.835</td>
      <td>5.022</td>
    </tr>
    <tr>
      <th>discomfort_delta_minimum</th>
      <td>-4.741</td>
      <td>-1.772</td>
      <td>-3.466</td>
      <td>-3.326</td>
    </tr>
    <tr>
      <th>discomfort_proportion</th>
      <td>0.370</td>
      <td>0.034</td>
      <td>0.085</td>
      <td>0.163</td>
    </tr>
    <tr>
      <th>discomfort_too_cold_proportion</th>
      <td>0.360</td>
      <td>0.000</td>
      <td>0.082</td>
      <td>0.147</td>
    </tr>
    <tr>
      <th>discomfort_too_hot_proportion</th>
      <td>0.010</td>
      <td>0.034</td>
      <td>0.003</td>
      <td>0.016</td>
    </tr>
    <tr>
      <th>electricity_consumption_total</th>
      <td>1.000</td>
      <td>1.000</td>
      <td>1.000</td>
      <td>1.000</td>
    </tr>
    <tr>
      <th>monthly_one_minus_load_factor_average</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.000</td>
    </tr>
    <tr>
      <th>one_minus_thermal_resilience_proportion</th>
      <td>0.333</td>
      <td>0.571</td>
      <td>0.133</td>
      <td>0.346</td>
    </tr>
    <tr>
      <th>power_outage_normalized_unserved_energy_total</th>
      <td>0.723</td>
      <td>0.692</td>
      <td>0.637</td>
      <td>0.684</td>
    </tr>
    <tr>
      <th>ramping_average</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.000</td>
    </tr>
    <tr>
      <th>zero_net_energy</th>
      <td>1.000</td>
      <td>1.000</td>
      <td>1.000</td>
      <td>1.000</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
<section id="Centralized-RBC">
<h2>Centralized RBC<a class="headerlink" href="#Centralized-RBC" title="Permalink to this headline"></a></h2>
<p>Run the following to simulate an environment controlled by centralized RBC agent for a single episode:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">citylearn.agents.rbc</span> <span class="kn">import</span> <span class="n">BasicRBC</span> <span class="k">as</span> <span class="n">Agent</span>
<span class="kn">from</span> <span class="nn">citylearn.citylearn</span> <span class="kn">import</span> <span class="n">CityLearnEnv</span>

<span class="n">dataset_name</span> <span class="o">=</span> <span class="s1">&#39;citylearn_challenge_2023_phase_2_local_evaluation&#39;</span>
<span class="n">env</span> <span class="o">=</span> <span class="n">CityLearnEnv</span><span class="p">(</span><span class="n">dataset_name</span><span class="p">,</span> <span class="n">central_agent</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">Agent</span><span class="p">(</span><span class="n">env</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">learn</span><span class="p">(</span><span class="n">episodes</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># print cost functions at the end of episode</span>
<span class="n">kpis</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">evaluate</span><span class="p">()</span>
<span class="n">kpis</span> <span class="o">=</span> <span class="n">kpis</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s1">&#39;cost_function&#39;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">&#39;value&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">kpis</span> <span class="o">=</span> <span class="n">kpis</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">how</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">kpis</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>name</th>
      <th>Building_1</th>
      <th>Building_2</th>
      <th>Building_3</th>
      <th>District</th>
    </tr>
    <tr>
      <th>cost_function</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>annual_normalized_unserved_energy_total</th>
      <td>0.017</td>
      <td>0.016</td>
      <td>0.016</td>
      <td>0.016</td>
    </tr>
    <tr>
      <th>annual_peak_average</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.179</td>
    </tr>
    <tr>
      <th>carbon_emissions_total</th>
      <td>1.997</td>
      <td>1.936</td>
      <td>1.737</td>
      <td>1.890</td>
    </tr>
    <tr>
      <th>cost_total</th>
      <td>1.930</td>
      <td>1.877</td>
      <td>1.709</td>
      <td>1.839</td>
    </tr>
    <tr>
      <th>daily_one_minus_load_factor_average</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.721</td>
    </tr>
    <tr>
      <th>daily_peak_average</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.352</td>
    </tr>
    <tr>
      <th>discomfort_delta_average</th>
      <td>-9.724</td>
      <td>-3.425</td>
      <td>-3.153</td>
      <td>-5.434</td>
    </tr>
    <tr>
      <th>discomfort_delta_maximum</th>
      <td>1.693</td>
      <td>4.220</td>
      <td>3.269</td>
      <td>3.061</td>
    </tr>
    <tr>
      <th>discomfort_delta_minimum</th>
      <td>-13.562</td>
      <td>-9.930</td>
      <td>-5.399</td>
      <td>-9.630</td>
    </tr>
    <tr>
      <th>discomfort_proportion</th>
      <td>0.975</td>
      <td>0.899</td>
      <td>0.957</td>
      <td>0.944</td>
    </tr>
    <tr>
      <th>discomfort_too_cold_proportion</th>
      <td>0.975</td>
      <td>0.892</td>
      <td>0.953</td>
      <td>0.940</td>
    </tr>
    <tr>
      <th>discomfort_too_hot_proportion</th>
      <td>0.000</td>
      <td>0.007</td>
      <td>0.003</td>
      <td>0.004</td>
    </tr>
    <tr>
      <th>electricity_consumption_total</th>
      <td>1.993</td>
      <td>1.962</td>
      <td>1.751</td>
      <td>1.902</td>
    </tr>
    <tr>
      <th>monthly_one_minus_load_factor_average</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.863</td>
    </tr>
    <tr>
      <th>one_minus_thermal_resilience_proportion</th>
      <td>0.667</td>
      <td>0.429</td>
      <td>0.267</td>
      <td>0.454</td>
    </tr>
    <tr>
      <th>power_outage_normalized_unserved_energy_total</th>
      <td>0.781</td>
      <td>0.759</td>
      <td>0.711</td>
      <td>0.750</td>
    </tr>
    <tr>
      <th>ramping_average</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.958</td>
    </tr>
    <tr>
      <th>zero_net_energy</th>
      <td>2.058</td>
      <td>1.993</td>
      <td>1.769</td>
      <td>1.940</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
<section id="Decentralized-Independent-SAC">
<h2>Decentralized-Independent SAC<a class="headerlink" href="#Decentralized-Independent-SAC" title="Permalink to this headline"></a></h2>
<p>Run the following to simulate an environment controlled by decentralized-independent SAC agents for 1 training episode:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">citylearn.agents.sac</span> <span class="kn">import</span> <span class="n">SAC</span> <span class="k">as</span> <span class="n">Agent</span>
<span class="kn">from</span> <span class="nn">citylearn.citylearn</span> <span class="kn">import</span> <span class="n">CityLearnEnv</span>

<span class="n">dataset_name</span> <span class="o">=</span> <span class="s1">&#39;citylearn_challenge_2023_phase_2_local_evaluation&#39;</span>
<span class="n">env</span> <span class="o">=</span> <span class="n">CityLearnEnv</span><span class="p">(</span><span class="n">dataset_name</span><span class="p">,</span> <span class="n">central_agent</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">Agent</span><span class="p">(</span><span class="n">env</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">learn</span><span class="p">(</span><span class="n">episodes</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">deterministic_finish</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># print cost functions at the end of episode</span>
<span class="n">kpis</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">evaluate</span><span class="p">()</span>
<span class="n">kpis</span> <span class="o">=</span> <span class="n">kpis</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s1">&#39;cost_function&#39;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">&#39;value&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">kpis</span> <span class="o">=</span> <span class="n">kpis</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">how</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">kpis</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>name</th>
      <th>Building_1</th>
      <th>Building_2</th>
      <th>Building_3</th>
      <th>District</th>
    </tr>
    <tr>
      <th>cost_function</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>annual_normalized_unserved_energy_total</th>
      <td>0.013</td>
      <td>0.013</td>
      <td>0.012</td>
      <td>0.013</td>
    </tr>
    <tr>
      <th>annual_peak_average</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.947</td>
    </tr>
    <tr>
      <th>carbon_emissions_total</th>
      <td>0.939</td>
      <td>0.943</td>
      <td>0.940</td>
      <td>0.941</td>
    </tr>
    <tr>
      <th>cost_total</th>
      <td>0.902</td>
      <td>0.905</td>
      <td>0.907</td>
      <td>0.905</td>
    </tr>
    <tr>
      <th>daily_one_minus_load_factor_average</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.947</td>
    </tr>
    <tr>
      <th>daily_peak_average</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.925</td>
    </tr>
    <tr>
      <th>discomfort_delta_average</th>
      <td>-1.587</td>
      <td>-0.276</td>
      <td>-0.522</td>
      <td>-0.795</td>
    </tr>
    <tr>
      <th>discomfort_delta_maximum</th>
      <td>4.775</td>
      <td>6.418</td>
      <td>4.015</td>
      <td>5.069</td>
    </tr>
    <tr>
      <th>discomfort_delta_minimum</th>
      <td>-6.335</td>
      <td>-4.455</td>
      <td>-2.931</td>
      <td>-4.574</td>
    </tr>
    <tr>
      <th>discomfort_proportion</th>
      <td>0.468</td>
      <td>0.474</td>
      <td>0.256</td>
      <td>0.400</td>
    </tr>
    <tr>
      <th>discomfort_too_cold_proportion</th>
      <td>0.422</td>
      <td>0.302</td>
      <td>0.223</td>
      <td>0.316</td>
    </tr>
    <tr>
      <th>discomfort_too_hot_proportion</th>
      <td>0.046</td>
      <td>0.172</td>
      <td>0.033</td>
      <td>0.084</td>
    </tr>
    <tr>
      <th>electricity_consumption_total</th>
      <td>0.949</td>
      <td>0.960</td>
      <td>0.954</td>
      <td>0.955</td>
    </tr>
    <tr>
      <th>monthly_one_minus_load_factor_average</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.997</td>
    </tr>
    <tr>
      <th>one_minus_thermal_resilience_proportion</th>
      <td>0.733</td>
      <td>0.500</td>
      <td>0.133</td>
      <td>0.456</td>
    </tr>
    <tr>
      <th>power_outage_normalized_unserved_energy_total</th>
      <td>0.627</td>
      <td>0.641</td>
      <td>0.593</td>
      <td>0.620</td>
    </tr>
    <tr>
      <th>ramping_average</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.883</td>
    </tr>
    <tr>
      <th>zero_net_energy</th>
      <td>0.964</td>
      <td>0.962</td>
      <td>0.955</td>
      <td>0.960</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
<section id="Decentralized-Cooperative-MARLISA">
<h2>Decentralized-Cooperative MARLISA<a class="headerlink" href="#Decentralized-Cooperative-MARLISA" title="Permalink to this headline"></a></h2>
<p>Run the following to simulate an environment controlled by decentralized-cooperative MARLISA agents for 1 training episodes:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">citylearn.agents.marlisa</span> <span class="kn">import</span> <span class="n">MARLISA</span> <span class="k">as</span> <span class="n">Agent</span>
<span class="kn">from</span> <span class="nn">citylearn.citylearn</span> <span class="kn">import</span> <span class="n">CityLearnEnv</span>

<span class="n">dataset_name</span> <span class="o">=</span> <span class="s1">&#39;citylearn_challenge_2023_phase_2_local_evaluation&#39;</span>
<span class="n">env</span> <span class="o">=</span> <span class="n">CityLearnEnv</span><span class="p">(</span><span class="n">dataset_name</span><span class="p">,</span> <span class="n">central_agent</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">Agent</span><span class="p">(</span><span class="n">env</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">learn</span><span class="p">(</span><span class="n">episodes</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">deterministic_finish</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">kpis</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">evaluate</span><span class="p">()</span>
<span class="n">kpis</span> <span class="o">=</span> <span class="n">kpis</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s1">&#39;cost_function&#39;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">&#39;value&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">kpis</span> <span class="o">=</span> <span class="n">kpis</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">how</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">kpis</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>name</th>
      <th>Building_1</th>
      <th>Building_2</th>
      <th>Building_3</th>
      <th>District</th>
    </tr>
    <tr>
      <th>cost_function</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>annual_normalized_unserved_energy_total</th>
      <td>0.013</td>
      <td>0.013</td>
      <td>0.012</td>
      <td>0.013</td>
    </tr>
    <tr>
      <th>annual_peak_average</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.949</td>
    </tr>
    <tr>
      <th>carbon_emissions_total</th>
      <td>0.954</td>
      <td>0.972</td>
      <td>0.957</td>
      <td>0.961</td>
    </tr>
    <tr>
      <th>cost_total</th>
      <td>0.916</td>
      <td>0.934</td>
      <td>0.925</td>
      <td>0.925</td>
    </tr>
    <tr>
      <th>daily_one_minus_load_factor_average</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.939</td>
    </tr>
    <tr>
      <th>daily_peak_average</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.933</td>
    </tr>
    <tr>
      <th>discomfort_delta_average</th>
      <td>-1.703</td>
      <td>-0.357</td>
      <td>-0.569</td>
      <td>-0.876</td>
    </tr>
    <tr>
      <th>discomfort_delta_maximum</th>
      <td>4.678</td>
      <td>6.237</td>
      <td>3.967</td>
      <td>4.961</td>
    </tr>
    <tr>
      <th>discomfort_delta_minimum</th>
      <td>-6.464</td>
      <td>-4.542</td>
      <td>-2.989</td>
      <td>-4.665</td>
    </tr>
    <tr>
      <th>discomfort_proportion</th>
      <td>0.495</td>
      <td>0.470</td>
      <td>0.266</td>
      <td>0.410</td>
    </tr>
    <tr>
      <th>discomfort_too_cold_proportion</th>
      <td>0.454</td>
      <td>0.315</td>
      <td>0.236</td>
      <td>0.335</td>
    </tr>
    <tr>
      <th>discomfort_too_hot_proportion</th>
      <td>0.041</td>
      <td>0.155</td>
      <td>0.030</td>
      <td>0.075</td>
    </tr>
    <tr>
      <th>electricity_consumption_total</th>
      <td>0.964</td>
      <td>0.990</td>
      <td>0.971</td>
      <td>0.975</td>
    </tr>
    <tr>
      <th>monthly_one_minus_load_factor_average</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.993</td>
    </tr>
    <tr>
      <th>one_minus_thermal_resilience_proportion</th>
      <td>0.733</td>
      <td>0.500</td>
      <td>0.133</td>
      <td>0.456</td>
    </tr>
    <tr>
      <th>power_outage_normalized_unserved_energy_total</th>
      <td>0.630</td>
      <td>0.646</td>
      <td>0.593</td>
      <td>0.623</td>
    </tr>
    <tr>
      <th>ramping_average</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.882</td>
    </tr>
    <tr>
      <th>zero_net_energy</th>
      <td>0.980</td>
      <td>0.993</td>
      <td>0.972</td>
      <td>0.982</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
<section id="Stable-Baselines3-Reinforcement-Learning-Algorithms">
<h2>Stable Baselines3 Reinforcement Learning Algorithms<a class="headerlink" href="#Stable-Baselines3-Reinforcement-Learning-Algorithms" title="Permalink to this headline"></a></h2>
<p>Install the latest version of Stable Baselines3:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">pip</span> install shimmy==0.2.1
<span class="o">%</span><span class="k">pip</span> install stable-baselines3==2.1.0
</pre></div>
</div>
</div>
<p>Before the environment is ready for use in Stable Baselines3, it needs to be wrapped. Firstly, wrap the environment using the <code class="docutils literal notranslate"><span class="pre">NormalizedObservationWrapper</span></code> (see <a class="reference external" href="https://www.citylearn.net/api/citylearn.wrappers.html#citylearn.wrappers.NormalizedObservationWrapper">docs</a>) to ensure that observations served to the agent are min-max normalized between [0, 1] and cyclical observations e.g. hour, are encoded using the cosine transformation.</p>
<p>Next, we wrap with the <code class="docutils literal notranslate"><span class="pre">StableBaselines3Wrapper</span></code> (see <a class="reference external" href="https://www.citylearn.net/api/citylearn.wrappers.html#citylearn.wrappers.StableBaselines3Wrapper">docs</a>) that ensures observations, actions and rewards are served in manner that is compatible with Stable Baselines3 interface.</p>
<p>For the following Stable Baselines3 example, the <code class="docutils literal notranslate"><span class="pre">baeda_3dem</span></code> dataset that support building temperature dynamics is used.</p>
<blockquote>
<div><p>⚠️ <strong>NOTE</strong>: <code class="docutils literal notranslate"><span class="pre">central_agent</span></code> in the <code class="docutils literal notranslate"><span class="pre">env</span></code> must be <code class="docutils literal notranslate"><span class="pre">True</span></code> when using Stable Baselines3 as it does not support multi-agents.</p>
</div></blockquote>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">stable_baselines3.sac</span> <span class="kn">import</span> <span class="n">SAC</span> <span class="k">as</span> <span class="n">Agent</span>
<span class="kn">from</span> <span class="nn">citylearn.citylearn</span> <span class="kn">import</span> <span class="n">CityLearnEnv</span>
<span class="kn">from</span> <span class="nn">citylearn.wrappers</span> <span class="kn">import</span> <span class="n">NormalizedObservationWrapper</span><span class="p">,</span> <span class="n">StableBaselines3Wrapper</span>

<span class="n">dataset_name</span> <span class="o">=</span> <span class="s1">&#39;citylearn_challenge_2023_phase_2_local_evaluation&#39;</span>
<span class="n">env</span> <span class="o">=</span> <span class="n">CityLearnEnv</span><span class="p">(</span><span class="n">dataset_name</span><span class="p">,</span> <span class="n">central_agent</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">env</span> <span class="o">=</span> <span class="n">NormalizedObservationWrapper</span><span class="p">(</span><span class="n">env</span><span class="p">)</span>
<span class="n">env</span> <span class="o">=</span> <span class="n">StableBaselines3Wrapper</span><span class="p">(</span><span class="n">env</span><span class="p">)</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">Agent</span><span class="p">(</span><span class="s1">&#39;MlpPolicy&#39;</span><span class="p">,</span> <span class="n">env</span><span class="p">)</span>
<span class="n">episodes</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">model</span><span class="o">.</span><span class="n">learn</span><span class="p">(</span><span class="n">total_timesteps</span><span class="o">=</span><span class="n">env</span><span class="o">.</span><span class="n">time_steps</span><span class="o">*</span><span class="n">episodes</span><span class="p">)</span>

<span class="c1"># evaluate</span>
<span class="n">observations</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>

<span class="k">while</span> <span class="ow">not</span> <span class="n">env</span><span class="o">.</span><span class="n">done</span><span class="p">:</span>
    <span class="n">actions</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">observations</span><span class="p">,</span> <span class="n">deterministic</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">observations</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>

<span class="n">kpis</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">evaluate</span><span class="p">()</span>
<span class="n">kpis</span> <span class="o">=</span> <span class="n">kpis</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s1">&#39;cost_function&#39;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">&#39;value&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">kpis</span> <span class="o">=</span> <span class="n">kpis</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">how</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">kpis</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
/Users/kingsleyenweye/Desktop/INTELLIGENT_ENVIRONMENT_LAB/citylearn/CityLearn/env/lib/python3.7/site-packages/gym/core.py:330: DeprecationWarning: <span class="ansi-yellow-fg">WARN: Initializing wrapper in old step API which returns one bool instead of two. It is recommended to set `new_step_api=True` to use new step API. This will be the default behaviour in future.</span>
  &#34;Initializing wrapper in old step API which returns one bool instead of two. It is recommended to set `new_step_api=True` to use new step API. This will be the default behaviour in future.&#34;
/Users/kingsleyenweye/Desktop/INTELLIGENT_ENVIRONMENT_LAB/citylearn/CityLearn/env/lib/python3.7/site-packages/stable_baselines3/common/vec_env/patch_gym.py:50: UserWarning: You provided an OpenAI Gym environment. We strongly recommend transitioning to Gymnasium environments. Stable-Baselines3 is automatically wrapping your environments in a compatibility layer, which could potentially cause issues.
  &#34;You provided an OpenAI Gym environment. &#34;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>name</th>
      <th>Building_1</th>
      <th>Building_2</th>
      <th>Building_3</th>
      <th>District</th>
    </tr>
    <tr>
      <th>cost_function</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>annual_normalized_unserved_energy_total</th>
      <td>0.015</td>
      <td>0.012</td>
      <td>0.014</td>
      <td>0.014</td>
    </tr>
    <tr>
      <th>annual_peak_average</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.834</td>
    </tr>
    <tr>
      <th>carbon_emissions_total</th>
      <td>0.388</td>
      <td>0.366</td>
      <td>0.503</td>
      <td>0.419</td>
    </tr>
    <tr>
      <th>cost_total</th>
      <td>0.368</td>
      <td>0.341</td>
      <td>0.473</td>
      <td>0.394</td>
    </tr>
    <tr>
      <th>daily_one_minus_load_factor_average</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.301</td>
    </tr>
    <tr>
      <th>daily_peak_average</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.691</td>
    </tr>
    <tr>
      <th>discomfort_delta_average</th>
      <td>9.481</td>
      <td>7.166</td>
      <td>7.980</td>
      <td>8.209</td>
    </tr>
    <tr>
      <th>discomfort_delta_maximum</th>
      <td>16.788</td>
      <td>14.865</td>
      <td>13.923</td>
      <td>15.192</td>
    </tr>
    <tr>
      <th>discomfort_delta_minimum</th>
      <td>-0.124</td>
      <td>-0.581</td>
      <td>-0.372</td>
      <td>-0.359</td>
    </tr>
    <tr>
      <th>discomfort_proportion</th>
      <td>0.982</td>
      <td>0.978</td>
      <td>0.978</td>
      <td>0.979</td>
    </tr>
    <tr>
      <th>discomfort_too_cold_proportion</th>
      <td>0.000</td>
      <td>0.000</td>
      <td>0.000</td>
      <td>0.000</td>
    </tr>
    <tr>
      <th>discomfort_too_hot_proportion</th>
      <td>0.982</td>
      <td>0.978</td>
      <td>0.978</td>
      <td>0.979</td>
    </tr>
    <tr>
      <th>electricity_consumption_total</th>
      <td>0.393</td>
      <td>0.374</td>
      <td>0.510</td>
      <td>0.425</td>
    </tr>
    <tr>
      <th>monthly_one_minus_load_factor_average</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.126</td>
    </tr>
    <tr>
      <th>one_minus_thermal_resilience_proportion</th>
      <td>1.000</td>
      <td>1.000</td>
      <td>1.000</td>
      <td>1.000</td>
    </tr>
    <tr>
      <th>power_outage_normalized_unserved_energy_total</th>
      <td>0.571</td>
      <td>0.510</td>
      <td>0.553</td>
      <td>0.545</td>
    </tr>
    <tr>
      <th>ramping_average</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.905</td>
    </tr>
    <tr>
      <th>zero_net_energy</th>
      <td>0.276</td>
      <td>0.349</td>
      <td>0.455</td>
      <td>0.360</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="installation.html" class="btn btn-neutral float-left" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="overview/index.html" class="btn btn-neutral float-right" title="Overview" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Jose Ramon Vazquez-Canteli, Kingsley Nweye, Zoltan Nagy.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>